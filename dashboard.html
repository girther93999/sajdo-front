<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Artic Auth - Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-brand">
            <h1 id="nav-title">Dashboard</h1>
        </div>
        <div class="nav-actions">
            <button class="theme-toggle" onclick="toggleTheme()" title="Toggle Dark Mode">
                <i class="fas fa-moon"></i>
            </button>
            <button class="btn-signout" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i>
                <span>Sign Out</span>
            </button>
        </div>
    </nav>

    <div class="dashboard-container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logged-in-section">
                    <div class="logged-in-label">LOGGED IN AS</div>
                    <div class="logged-in-username" id="sidebar-username">Loading...</div>
                </div>
            </div>
            <nav class="sidebar-nav" id="main-sidebar-nav">
                <!-- Regular user nav items -->
                <button class="nav-item user-nav" onclick="showTab('applications')" data-tab="applications">
                    <i class="fas fa-cog"></i>
                    <span>Applications</span>
                </button>
                <button class="nav-item user-nav" onclick="showTab('generate')" data-tab="generate">
                    <i class="fas fa-plus"></i>
                    <span>Key Gen</span>
                </button>
                <button class="nav-item user-nav active" onclick="showTab('keys')" data-tab="keys">
                    <i class="fas fa-key"></i>
                    <span>Keys</span>
                </button>
                <button class="nav-item user-nav" onclick="showTab('integration')" data-tab="integration">
                    <i class="fas fa-code"></i>
                    <span>Integration</span>
                </button>
                <!-- Admin-only nav items -->
                <button class="nav-item admin-only" style="display:none;" onclick="showTab('admin-users')" data-tab="admin-users">
                    <i class="fas fa-users"></i>
                    <span>Users</span>
                </button>
                <button class="nav-item admin-only" style="display:none;" onclick="showTab('admin-resellers')" data-tab="admin-resellers">
                    <i class="fas fa-handshake"></i>
                    <span>Resellers</span>
                </button>
                <button class="nav-item admin-only" style="display:none;" onclick="showTab('admin-invites')" data-tab="admin-invites">
                    <i class="fas fa-ticket-alt"></i>
                    <span>Invites</span>
                </button>
                <button class="nav-item admin-only" style="display:none;" onclick="showTab('admin-updates')" data-tab="admin-updates">
                    <i class="fas fa-upload"></i>
                    <span>Updates</span>
                </button>
            </nav>
            
            <!-- Application Sidebar Nav (shown when viewing application) -->
            <nav class="sidebar-nav" id="app-sidebar-nav" style="display: none;">
                <button class="nav-item app-nav active" onclick="showAppTab('keys')" data-tab="app-keys">
                    <i class="fas fa-key"></i>
                    <span>Keys</span>
                </button>
                <button class="nav-item app-nav" onclick="showAppTab('generate')" data-tab="app-generate">
                    <i class="fas fa-plus"></i>
                    <span>Key Gen</span>
                </button>
                <button class="nav-item app-nav" onclick="showAppTab('integration')" data-tab="app-integration">
                    <i class="fas fa-code"></i>
                    <span>Integration</span>
                </button>
            </nav>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Applications Tab -->
            <div id="applications-tab" class="tab-content">
                <div class="page-header">
                    <div>
                        <h1>Applications</h1>
                        <p class="page-subtitle">Manage your applications and generate keys for each project</p>
                    </div>
                    <button class="btn btn-primary" onclick="showCreateApplicationModal()">
                        <i class="fas fa-plus"></i>
                        <span>Create Application</span>
                    </button>
                </div>

                <div class="card">
                    <div class="card-body">
                        <div id="applications-list" class="loading">Loading applications...</div>
                    </div>
                </div>
            </div>

            <!-- Application Detail View (Full Dashboard) -->
            <div id="application-detail-tab" class="tab-content" style="display: none;">
                <!-- Application Header -->
                <div class="app-context-header">
                    <button class="btn btn-secondary" onclick="exitApplicationView()">
                        <i class="fas fa-arrow-left"></i>
                        <span>Back to Main Account</span>
                    </button>
                    <div class="app-context-info">
                        <i class="fas fa-cog"></i>
                        <span id="app-context-name">Application</span>
                    </div>
                </div>

                <!-- Application Keys Tab -->
                <div id="app-keys-tab" class="tab-content active">
                    <div class="key-list-header">
                        <h2>Key List</h2>
                        <div class="search-container">
                            <input type="text" id="app-key-search" class="search-input" placeholder="Search keys..." oninput="filterAppKeys()" onkeyup="filterAppKeys()" onfocus="clearSearchPlaceholder()">
                            <i class="fas fa-search search-icon"></i>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-body">
                            <div class="table-actions-bar" style="display:flex; gap:0.5rem; flex-wrap:wrap; margin-bottom:12px;">
                                <button class="btn btn-secondary" onclick="deleteSelectedAppKeys()">
                                    <i class="fas fa-trash"></i>
                                    <span>Delete Selected</span>
                                </button>
                                <button class="btn btn-secondary" onclick="deleteExpiredAppKeys()">
                                    <i class="fas fa-clock"></i>
                                    <span>Delete Expired</span>
                                </button>
                                <button class="btn btn-danger" onclick="deleteAllAppKeys()">
                                    <i class="fas fa-ban"></i>
                                    <span>Delete All</span>
                                </button>
                                <div id="app-keys-selection-status" style="align-self:center; color:#888; font-size:12px; margin-left:4px;"></div>
                            </div>
                            <div class="table-wrapper">
                                <table class="keys-table">
                                    <thead>
                                        <tr>
                                            <th style="width:36px; text-align:center;">
                                                <label class="custom-checkbox">
                                                    <input type="checkbox" id="app-keys-select-all" onclick="toggleSelectAllAppKeys(this.checked)">
                                                    <span class="checkmark"></span>
                                                </label>
                                            </th>
                                            <th>Key</th>
                                            <th>HWID</th>
                                            <th>Expiry Date</th>
                                            <th>Frozen</th>
                                            <th>Created By</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="app-keys-table">
                                        <tr><td colspan="7" class="loading">Loading keys...</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Application Generate Tab -->
                <div id="app-generate-tab" class="tab-content">
                    <div class="page-header">
                        <div>
                            <h1>Generate Key</h1>
                            <p class="page-subtitle">Create a new license key for this application</p>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-body">
                            <div class="form-section">
                                <label class="form-label">Key Format</label>
                                <input type="text" id="app-format" placeholder="KEY-****" value="KEY-****" class="form-input">
                                <span class="form-hint">Use * for random characters</span>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-section">
                                    <label class="form-label">Duration</label>
                                    <select id="app-duration" class="form-input">
                                        <option value="second">Seconds</option>
                                        <option value="minute">Minutes</option>
                                        <option value="hour">Hours</option>
                                        <option value="day" selected>Days</option>
                                        <option value="month">Months</option>
                                        <option value="lifetime">Lifetime</option>
                                    </select>
                                </div>
                                
                                <div class="form-section" id="app-amount-group">
                                    <label class="form-label">Amount</label>
                                    <input type="number" id="app-amount" min="1" value="30" class="form-input">
                                </div>
                            </div>
                            
                            <button class="btn btn-primary btn-large" onclick="generateAppKey()">
                                <i class="fas fa-key"></i>
                                <span>Generate Key</span>
                            </button>
                            
                            <div id="app-generated-result" class="result-box" style="display: none;">
                                <div class="result-header">
                                    <i class="fas fa-check-circle"></i>
                                    <span>Key Generated Successfully</span>
                                </div>
                                <div class="result-key">
                                    <code id="app-generated-key"></code>
                                    <button class="btn-icon" onclick="copyAppKey()" title="Copy">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                </div>
                                <div class="result-info" id="app-key-info"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Application Integration Tab -->
                <div id="app-integration-tab" class="tab-content">
                    <div class="page-header">
                        <div>
                            <h1>Integration</h1>
                            <p class="page-subtitle">Use these credentials to integrate with your application</p>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-body">
                            <div class="credentials-list">
                                <div class="credential-item">
                                    <div class="credential-label">
                                        <i class="fas fa-id-card"></i>
                                        <span>Account ID</span>
                                    </div>
                                    <div class="credential-value">
                                        <code id="app-account-id"></code>
                                        <button class="btn-icon" onclick="copyCredential('app-account-id')" title="Copy">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="credential-item">
                                    <div class="credential-label">
                                        <i class="fas fa-lock"></i>
                                        <span>API Token</span>
                                    </div>
                                    <div class="credential-value">
                                        <code id="app-api-token"></code>
                                        <button class="btn-icon" onclick="copyCredential('app-api-token')" title="Copy">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="integration-guide">
                                <h3>
                                    <i class="fas fa-book"></i>
                                    <span>Integration Guide</span>
                                </h3>
                                <p>Add these lines to your C++ code:</p>
                                <div class="code-block">
                                    <div class="code-header">
                                        <span>C++ Example</span>
                                        <button class="btn-code-copy" onclick="copyAppCode('app-integration-code')">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                    </div>
                                    <pre id="app-integration-code"><code>// Your Application Credentials
std::string ACCOUNT_ID = "<span id="app-code-account-id">YOUR_ACCOUNT_ID</span>";
std::string API_TOKEN = "<span id="app-code-api-token">YOUR_API_TOKEN</span>";

// Set credentials (REQUIRED - keys only work with correct account)
AuthClient auth("https://answub-back.onrender.com");
auth.setCredentials(ACCOUNT_ID, API_TOKEN);

// Now validate keys (only YOUR keys will work!)
if (auth.validateKey(userKey)) {
    std::cout &lt;&lt; "Success!\n";
}</code></pre>
                                </div>
                                <div class="info-box">
                                    <i class="fas fa-info-circle"></i>
                                    <div>
                                        <strong>Important:</strong> Keys will ONLY work with the account that created them. Keys lock to the first computer (HWID) that uses them.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h2>Download Files</h2>
                        </div>
                        <div class="card-body">
                            <p class="form-hint" style="margin-bottom: 1.5rem;">Download the required files for integration:</p>
                            <div class="files-grid">
                                <div class="file-card">
                                    <div class="file-icon">
                                        <i class="fas fa-file-code"></i>
                                    </div>
                                    <div class="file-info">
                                        <div class="file-name">auth_client.h</div>
                                        <div class="file-desc">Header file with AuthClient class</div>
                                    </div>
                                    <div class="file-actions">
                                        <button class="btn btn-secondary" onclick="showFile('auth_client.h')" title="View Code">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="btn btn-primary" onclick="downloadFile('auth_client.h')">
                                            <i class="fas fa-download"></i>
                                            <span>Download</span>
                                        </button>
                                    </div>
                                </div>
                                <div class="file-card">
                                    <div class="file-icon">
                                        <i class="fas fa-file-code"></i>
                                    </div>
                                    <div class="file-info">
                                        <div class="file-name">auth_client.cpp</div>
                                        <div class="file-desc">Implementation file</div>
                                    </div>
                                    <div class="file-actions">
                                        <button class="btn btn-secondary" onclick="showFile('auth_client.cpp')" title="View Code">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="btn btn-primary" onclick="downloadFile('auth_client.cpp')">
                                            <i class="fas fa-download"></i>
                                            <span>Download</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Integration Tab -->
            <div id="integration-tab" class="tab-content">
                <div class="page-header">
                    <div>
                        <h1>Integration</h1>
                        <p class="page-subtitle">Use these credentials to integrate with your application</p>
                    </div>
                </div>

                <div class="card">
                    <div class="card-body">
                        <div class="credentials-list">
                            <div class="credential-item">
                                <div class="credential-label">
                                    <i class="fas fa-id-card"></i>
                                    <span>Account ID</span>
                                </div>
                                <div class="credential-value">
                                    <code id="account-id"></code>
                                    <button class="btn-icon" onclick="copyCredential('account-id')" title="Copy">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="credential-item">
                                <div class="credential-label">
                                    <i class="fas fa-lock"></i>
                                    <span>API Token</span>
                                </div>
                                <div class="credential-value">
                                    <code id="api-token"></code>
                                    <button class="btn-icon" onclick="copyCredential('api-token')" title="Copy">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="credential-item">
                                <div class="credential-label">
                                    <i class="fas fa-user"></i>
                                    <span>Username</span>
                                </div>
                                <div class="credential-value">
                                    <code id="account-username"></code>
                                </div>
                            </div>
                        </div>
                        
                        <div class="integration-guide">
                            <h3>
                                <i class="fas fa-book"></i>
                                <span>Integration Guide</span>
                            </h3>
                            <p>Add these lines to your C++ code:</p>
                            <div class="code-block">
                                <div class="code-header">
                                    <span>C++ Example</span>
                                    <button class="btn-code-copy" onclick="copyCode('integration-code')">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                </div>
                                <pre id="integration-code"><code>// Your Account Credentials
std::string ACCOUNT_ID = "<span id="code-account-id">YOUR_ACCOUNT_ID</span>";
std::string API_TOKEN = "<span id="code-api-token">YOUR_API_TOKEN</span>";

// Set credentials (REQUIRED - keys only work with correct account)
AuthClient auth("https://answub-back.onrender.com");
auth.setCredentials(ACCOUNT_ID, API_TOKEN);

// Now validate keys (only YOUR keys will work!)
if (auth.validateKey(userKey)) {
    std::cout &lt;&lt; "Success!\n";
}</code></pre>
                            </div>
                            <div class="info-box">
                                <i class="fas fa-info-circle"></i>
                                <div>
                                    <strong>Important:</strong> Keys will ONLY work with the account that created them. Keys lock to the first computer (HWID) that uses them.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2>Download Files</h2>
                    </div>
                    <div class="card-body">
                        <p class="form-hint" style="margin-bottom: 1.5rem;">Download the required files for integration:</p>
                        <div class="files-grid">
                            <div class="file-card">
                                <div class="file-icon">
                                    <i class="fas fa-file-code"></i>
                                </div>
                                <div class="file-info">
                                    <div class="file-name">auth_client.h</div>
                                    <div class="file-desc">Header file with AuthClient class</div>
                                </div>
                                <div class="file-actions">
                                    <button class="btn btn-secondary" onclick="showFile('auth_client.h')" title="View Code">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-primary" onclick="downloadFile('auth_client.h')">
                                        <i class="fas fa-download"></i>
                                        <span>Download</span>
                                    </button>
                                </div>
                            </div>
                            <div class="file-card">
                                <div class="file-icon">
                                    <i class="fas fa-file-code"></i>
                                </div>
                                <div class="file-info">
                                    <div class="file-name">auth_client.cpp</div>
                                    <div class="file-desc">Implementation file</div>
                                </div>
                                <div class="file-actions">
                                    <button class="btn btn-secondary" onclick="showFile('auth_client.cpp')" title="View Code">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-primary" onclick="downloadFile('auth_client.cpp')">
                                        <i class="fas fa-download"></i>
                                        <span>Download</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <!-- Overview Tab -->
            <div id="overview-tab" class="tab-content">
                <div class="page-header">
                    <div>
                        <h1 class="slide-in-left">Dashboard</h1>
                        <p class="page-subtitle slide-in-left-delay">Welcome back, <span id="overview-username"></span></p>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon-wrapper">
                            <i class="fas fa-key"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-label">Total Keys</div>
                            <div class="stat-value" id="stat-total">0</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon-wrapper success">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-label">Active</div>
                            <div class="stat-value" id="stat-active">0</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon-wrapper warning">
                            <i class="fas fa-unlock"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-label">Used</div>
                            <div class="stat-value" id="stat-used">0</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon-wrapper danger">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-label">Expired</div>
                            <div class="stat-value" id="stat-expired">0</div>
                        </div>
                    </div>
                </div>

                <div class="quick-actions-section">
                    <h2 class="section-title">Quick Actions</h2>
                    <div class="actions-grid">
                        <button class="action-card" onclick="showTab('generate')">
                            <div class="action-icon">
                                <i class="fas fa-plus"></i>
                            </div>
                            <div class="action-content">
                                <div class="action-title">Generate Key</div>
                                <div class="action-desc">Create a new license key</div>
                            </div>
                            <i class="fas fa-chevron-right action-arrow"></i>
                        </button>
                        <button class="action-card" onclick="showTab('keys')">
                            <div class="action-icon">
                                <i class="fas fa-list"></i>
                            </div>
                            <div class="action-content">
                                <div class="action-title">View Keys</div>
                                <div class="action-desc">Manage all your keys</div>
                            </div>
                            <i class="fas fa-chevron-right action-arrow"></i>
                        </button>
                        <button class="action-card" onclick="showTab('credentials')">
                            <div class="action-icon">
                                <i class="fas fa-code"></i>
                            </div>
                            <div class="action-content">
                                <div class="action-title">Integration</div>
                                <div class="action-desc">Get your credentials</div>
                            </div>
                            <i class="fas fa-chevron-right action-arrow"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Keys Tab -->
            <div id="keys-tab" class="tab-content active">
                <div class="key-list-header">
                    <h2>Key List</h2>
                    <div class="search-container">
                        <input type="text" id="key-search" class="search-input" placeholder="Search keys..." oninput="filterKeys()" onkeyup="filterKeys()" onfocus="clearSearchPlaceholder()">
                        <i class="fas fa-search search-icon"></i>
                    </div>
                </div>

                <div class="card">
                    <div class="card-body">
                        <div class="table-actions-bar" style="display:flex; gap:0.5rem; flex-wrap:wrap; margin-bottom:12px;">
                            <button class="btn btn-secondary" onclick="deleteSelectedKeys()">
                                <i class="fas fa-trash"></i>
                                <span>Delete Selected</span>
                            </button>
                            <button class="btn btn-secondary" onclick="deleteExpiredKeys()">
                                <i class="fas fa-clock"></i>
                                <span>Delete Expired</span>
                            </button>
                            <button class="btn btn-danger" onclick="deleteAllKeys()">
                                <i class="fas fa-ban"></i>
                                <span>Delete All</span>
                            </button>
                            <div id="keys-selection-status" style="align-self:center; color:#888; font-size:12px; margin-left:4px;"></div>
                        </div>
                        <div class="table-wrapper">
                            <table class="keys-table">
                                <thead>
                                    <tr>
                                        <th style="width:36px; text-align:center;">
                                            <label class="custom-checkbox">
                                                <input type="checkbox" id="keys-select-all" onclick="toggleSelectAllKeys(this.checked)">
                                                <span class="checkmark"></span>
                                            </label>
                                        </th>
                                        <th>Key</th>
                                        <th>HWID</th>
                                        <th>Expiry Date</th>
                                        <th>Frozen</th>
                                        <th>Created By</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="keys-table">
                                    <tr><td colspan="7" class="loading">Loading keys...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Generate Tab -->
            <div id="generate-tab" class="tab-content">
                <div class="page-header">
                    <div>
                        <h1>Generate Key</h1>
                        <p class="page-subtitle">Create a new license key for your application</p>
                    </div>
                </div>

                <div class="card">
                    <div class="card-body">
                        <div class="form-section">
                            <label class="form-label">Key Format</label>
                            <input type="text" id="format" placeholder="KEY-****" value="KEY-****" class="form-input">
                            <span class="form-hint">Use * for random characters</span>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-section">
                                <label class="form-label">Duration</label>
                                <select id="duration" class="form-input">
                                    <option value="second">Seconds</option>
                                    <option value="minute">Minutes</option>
                                    <option value="hour">Hours</option>
                                    <option value="day" selected>Days</option>
                                    <option value="month">Months</option>
                                    <option value="lifetime">Lifetime</option>
                                </select>
                            </div>
                            
                            <div class="form-section" id="amount-group">
                                <label class="form-label">Amount</label>
                                <input type="number" id="amount" min="1" value="30" class="form-input">
                            </div>
                        </div>
                        
                        <button class="btn btn-primary btn-large" onclick="generateKey()">
                            <i class="fas fa-key"></i>
                            <span>Generate Key</span>
                        </button>
                        
                        <div id="generated-result" class="result-box" style="display: none;">
                            <div class="result-header">
                                <i class="fas fa-check-circle"></i>
                                <span>Key Generated Successfully</span>
                            </div>
                            <div class="result-key">
                                <code id="generated-key"></code>
                                <button class="btn-icon" onclick="copyKey()" title="Copy">
                                    <i class="fas fa-copy"></i>
                                </button>
                            </div>
                            <div class="result-info" id="key-info"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Credentials Tab -->
            <div id="credentials-tab" class="tab-content">
                <div class="page-header">
                    <div>
                        <h1>Integration</h1>
                        <p class="page-subtitle">Use these credentials to integrate with your application</p>
                    </div>
                </div>

                <div class="card">
                    <div class="card-body">
                        <div class="credentials-list">
                            <div class="credential-item">
                                <div class="credential-label">
                                    <i class="fas fa-id-card"></i>
                                    <span>Account ID</span>
                                </div>
                                <div class="credential-value">
                                    <code id="account-id"></code>
                                    <button class="btn-icon" onclick="copyCredential('account-id')" title="Copy">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="credential-item">
                                <div class="credential-label">
                                    <i class="fas fa-lock"></i>
                                    <span>API Token</span>
                                </div>
                                <div class="credential-value">
                                    <code id="api-token"></code>
                                    <button class="btn-icon" onclick="copyCredential('api-token')" title="Copy">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="credential-item">
                                <div class="credential-label">
                                    <i class="fas fa-user"></i>
                                    <span>Username</span>
                                </div>
                                <div class="credential-value">
                                    <code id="account-username"></code>
                                </div>
                            </div>
                        </div>
                        
                        <div class="integration-guide">
                            <h3>
                                <i class="fas fa-book"></i>
                                <span>Integration Guide</span>
                            </h3>
                            <p>Add these lines to your C++ code:</p>
                            <div class="code-block">
                                <div class="code-header">
                                    <span>C++ Example</span>
                                    <button class="btn-code-copy" onclick="copyCode('integration-code')">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                </div>
                                <pre id="integration-code"><code>// Your Account Credentials
std::string ACCOUNT_ID = "<span id="code-account-id">YOUR_ACCOUNT_ID</span>";
std::string API_TOKEN = "<span id="code-api-token">YOUR_API_TOKEN</span>";

// Set credentials (REQUIRED - keys only work with correct account)
AuthClient auth("https://answub-back.onrender.com");
auth.setCredentials(ACCOUNT_ID, API_TOKEN);

// Now validate keys (only YOUR keys will work!)
if (auth.validateKey(userKey)) {
    std::cout &lt;&lt; "Success!\n";
}</code></pre>
                            </div>
                            <div class="info-box">
                                <i class="fas fa-info-circle"></i>
                                <div>
                                    <strong>Important:</strong> Keys will ONLY work with the account that created them. Keys lock to the first computer (HWID) that uses them.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2>Download Files</h2>
                    </div>
                    <div class="card-body">
                        <p class="form-hint" style="margin-bottom: 1.5rem;">Download the required files for integration:</p>
                        <div class="files-grid">
                            <div class="file-card">
                                <div class="file-icon">
                                    <i class="fas fa-file-code"></i>
                                </div>
                                <div class="file-info">
                                    <div class="file-name">auth_client.h</div>
                                    <div class="file-desc">Header file with AuthClient class</div>
                                </div>
                                <div class="file-actions">
                                    <button class="btn btn-secondary" onclick="showFile('auth_client.h')" title="View Code">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-primary" onclick="downloadFile('auth_client.h')">
                                        <i class="fas fa-download"></i>
                                        <span>Download</span>
                                    </button>
                                </div>
                            </div>
                            <div class="file-card">
                                <div class="file-icon">
                                    <i class="fas fa-file-code"></i>
                                </div>
                                <div class="file-info">
                                    <div class="file-name">auth_client.cpp</div>
                                    <div class="file-desc">Implementation file</div>
                                </div>
                                <div class="file-actions">
                                    <button class="btn btn-secondary" onclick="showFile('auth_client.cpp')" title="View Code">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-primary" onclick="downloadFile('auth_client.cpp')">
                                        <i class="fas fa-download"></i>
                                        <span>Download</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Admin Users Tab -->
            <div id="admin-users-tab" class="tab-content" style="display: none;">
                <div class="page-header">
                    <div>
                        <h1>Admin • Users</h1>
                        <p class="page-subtitle">View, ban, kick, and manage accounts</p>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <h2>All Users</h2>
                        <button class="btn btn-primary" onclick="showCreateUserModal()">
                            <i class="fas fa-plus"></i>
                            <span>Create User</span>
                        </button>
                    </div>
                    <div class="card-body">
                        <div id="admin-users-list" class="loading">Loading users...</div>
                    </div>
                    </div>
                </div>

            <!-- Admin Resellers Tab -->
            <div id="admin-resellers-tab" class="tab-content" style="display: none;">
                <div class="page-header">
                    <div>
                        <h1>Admin • Resellers</h1>
                        <p class="page-subtitle">Manage reseller accounts and balances</p>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <h2>Resellers</h2>
                        <button class="btn btn-primary" onclick="showCreateResellerModal()">
                            <i class="fas fa-plus"></i>
                            <span>Create Reseller</span>
                        </button>
                    </div>
                    <div class="card-body">
                        <div id="admin-resellers-list" class="loading">Loading resellers...</div>
                    </div>
                    </div>
                </div>

            <!-- Admin Invites Tab -->
            <div id="admin-invites-tab" class="tab-content" style="display: none;">
                <div class="page-header">
                    <div>
                        <h1>Admin • Invites</h1>
                        <p class="page-subtitle">Generate and manage invite codes</p>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <h2>Invite Codes</h2>
                        <button class="btn btn-primary" onclick="generateInvites()">
                            <i class="fas a-plus"></i>
                            <span>Generate Invites</span>
                        </button>
                    </div>
                    <div class="card-body">
                        <div id="admin-invites-list" class="loading">Loading invites...</div>
                    </div>
                </div>
            </div>

            <!-- Admin Updates Tab -->
            <div id="admin-updates-tab" class="tab-content" style="display: none;">
                <div class="page-header">
                    <div>
                        <h1>Admin • Updates</h1>
                        <p class="page-subtitle">Upload releases and view current versions</p>
                    </div>
                </div>

                <!-- Cheat Update Upload -->
                <div class="card">
                    <div class="card-header">
                        <h2>Upload Cheat Update</h2>
                    </div>
                    <div class="card-body">
                        <div class="form-section">
                            <label class="form-label">Version Number</label>
                            <input type="text" id="update-version-cheat" class="form-input" placeholder="e.g., 1.0.0, 2.1.3" required>
                            <span class="form-hint">Enter a unique version number. Clients will only update if their version differs.</span>
                        </div>
                        <div class="form-section" style="margin-top: 1rem;">
                            <label class="form-label">What's Changed / Update Notes</label>
                            <textarea id="update-changelog-cheat" class="form-input" rows="4" placeholder="e.g., Fixed bugs, Added new features, Performance improvements..." style="resize: vertical; min-height: 80px;"></textarea>
                            <span class="form-hint">Describe what changed in this update. This will be sent to Discord.</span>
                        </div>
                        <div class="form-section" style="margin-top: 1rem;">
                            <label class="form-label">Select File (.exe)</label>
                            <input type="file" id="update-file-cheat" accept=".exe" class="form-input">
                            <span class="form-hint">Upload the latest version. Users will auto-update on next launch.</span>
                        </div>
                        <button class="btn btn-primary" onclick="uploadUpdate('cheat')">
                            <i class="fas fa-upload"></i>
                            <span>Upload Cheat Update</span>
                        </button>
                        <div id="upload-status-cheat" style="margin-top: 1rem;"></div>
                    </div>
                </div>

                <!-- Spoofer Update Upload -->
                <div class="card">
                    <div class="card-header">
                        <h2>Upload Spoofer Update</h2>
                    </div>
                    <div class="card-body">
                        <div class="form-section">
                            <label class="form-label">Version Number</label>
                            <input type="text" id="update-version-spoofer" class="form-input" placeholder="e.g., 0.0.1, 0.1.0" required>
                            <span class="form-hint">Enter a unique version number. Clients will only update if their version differs.</span>
                        </div>
                        <div class="form-section" style="margin-top: 1rem;">
                            <label class="form-label">What's Changed / Update Notes</label>
                            <textarea id="update-changelog-spoofer" class="form-input" rows="4" placeholder="e.g., Fixed bugs, Added new features, Performance improvements..." style="resize: vertical; min-height: 80px;"></textarea>
                            <span class="form-hint">Describe what changed in this update. This will be sent to Discord.</span>
                        </div>
                        <div class="form-section" style="margin-top: 1rem;">
                            <label class="form-label">Select File (.exe)</label>
                            <input type="file" id="update-file-spoofer" accept=".exe" class="form-input">
                            <span class="form-hint">Upload the latest version. Users will auto-update on next launch.</span>
                        </div>
                        <button class="btn btn-primary" onclick="uploadUpdate('spoofer')">
                            <i class="fas fa-upload"></i>
                            <span>Upload Spoofer Update</span>
                        </button>
                        <div id="upload-status-spoofer" style="margin-top: 1 rem;"></div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2>Current Version Info</h2>
                    </div>
                    <div class="card-body">
                        <div style="margin-bottom: 1.5rem;">
                            <h3 style="margin-bottom: 0.5rem; color: #ffffff;">Cheat</h3>
                            <div id="update-info-cheat" class="loading">Checking...</div>
                        </div>
                        <div>
                            <h3 style="margin-bottom: 0.5rem; color: #ffffff;">Spoofer</h3>
                            <div id="update-info-spoofer" class="loading">Checking...</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- User Details Modal -->
            <div id="userDetailsModal" class="modal">
                <div class="modal-content" style="max-width: 800px;">
                    <div class="modal-header">
                        <h3 id="userDetailsTitle">User Details</h3>
                        <button class="modal-close" onclick="closeUserDetailsModal()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div id="userDetailsContent" class="loading">Loading...</div>
                    </div>
                </div>
            </div>

            <!-- Create User Modal -->
            <div id="createUserModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Create New User</h3>
                        <button class="modal-close" onclick="closeCreateUserModal()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="form-section">
                            <label class="form-label">Account Type</label>
                            <select id="new-user-account-type" class="form-input" onchange="toggleUserTypeFields()">
                                <option value="user">Normal User</option>
                                <option value="reseller">Reseller</option>
                            </select>
                        </div>
                        <div class="form-section">
                            <label class="form-label">Username</label>
                            <input type="text" id="new-user-username" placeholder="Enter username" class="form-input">
                        </div>
                        <div class="form-section">
                            <label class="form-label">Email</label>
                            <input type="email" id="new-user-email" placeholder="Enter email" class="form-input">
                        </div>
                        <div class="form-section">
                            <label class="form-label">Password</label>
                            <input type="password" id="new-user-password" placeholder="Enter password (min 6 chars)" class="form-input">
                        </div>
                        <div id="reseller-fields" style="display: none;">
                            <div class="form-section">
                                <label class="form-label">Initial Balance ($)</label>
                                <input type="number" id="new-user-balance" placeholder="0.00" step="0.01" min="0" value="0" class="form-input">
                            </div>
                            <div class="form-section">
                                <label class="form-label">Allowed Products</label>
                                <div style="margin-top: 0.5rem;">
                                    <label style="display: flex; align-items: center; margin-bottom: 0.5rem;">
                                        <input type="checkbox" id="user-product-private" checked style="margin-right: 0.5rem;">
                                        <span>Private</span>
                                    </label>
                                    <label style="display: flex; align-items: center;">
                                        <input type="checkbox" id="user-product-public" style="margin-right: 0.5rem;">
                                        <span>Public (Coming Soon)</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="createUser()">
                            <i class="fas fa-user-plus"></i>
                            <span>Create User</span>
                        </button>
                        <div id="create-user-status" style="margin-top: 1rem;"></div>
                    </div>
                </div>
            </div>

            <!-- Create Reseller Modal -->
            <div id="createResellerModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Create Reseller Account</h3>
                        <button class="modal-close" onclick="closeCreateResellerModal()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="form-section">
                            <label class="form-label">Username</label>
                            <input type="text" id="new-reseller-username" placeholder="Enter username" class="form-input">
                        </div>
                        <div class="form-section">
                            <label class="form-label">Email</label>
                            <input type="email" id="new-reseller-email" placeholder="Enter email" class="form-input">
                        </div>
                        <div class="form-section">
                            <label class="form-label">Password</label>
                            <input type="password" id="new-reseller-password" placeholder="Enter password (min 6 chars)" class="form-input">
                        </div>
                        <div class="form-section">
                            <label class="form-label">Initial Balance ($)</label>
                            <input type="number" id="new-reseller-balance" placeholder="0.00" step="0.01" min="0" value="0" class="form-input">
                        </div>
                        <div class="form-section">
                            <label class="form-label">Allowed Products</label>
                            <div style="margin-top: 0.5rem;">
                                <label style="display: flex; align-items: center; margin-bottom: 0.5rem;">
                                    <input type="checkbox" id="reseller-product-private" checked style="margin-right: 0.5rem;">
                                    <span>Private</span>
                                </label>
                                <label style="display: flex; align-items: center;">
                                    <input type="checkbox" id="reseller-product-public" style="margin-right: 0.5rem;">
                                    <span>Public (Coming Soon)</span>
                                </label>
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="createReseller()">
                            <i class="fas fa-user-plus"></i>
                            <span>Create Reseller</span>
                        </button>
                        <div id="create-reseller-status" style="margin-top: 1rem;"></div>
                    </div>
                </div>
            </div>

            <!-- Manage Reseller Modal -->
            <div id="manageResellerModal" class="modal">
                <div class="modal-content" style="max-width: 600px;">
                    <div class="modal-header">
                        <h3 id="manage-reseller-title">Manage Reseller</h3>
                        <button class="modal-close" onclick="closeManageResellerModal()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div id="manage-reseller-content" class="loading">Loading...</div>
                    </div>
                </div>
            </div>

            <!-- Key Details Modal -->
            <div id="keyDetailsModal" class="modal">
                <div class="modal-content" style="max-width: 700px;">
                    <div class="modal-header">
                        <h3>Key Details</h3>
                        <button class="modal-close" onclick="closeKeyDetailsModal()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div id="key-details-content" class="loading">Loading...</div>
                    </div>
                </div>
            </div>

            <!-- Create Application Modal -->
            <div id="createApplicationModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Create New Application</h3>
                        <button class="modal-close" onclick="closeCreateApplicationModal()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="form-section">
                            <label class="form-label">Application Name</label>
                            <input type="text" id="new-app-name" placeholder="Enter application name" class="form-input" maxlength="50">
                            <span class="form-hint">Choose a name for your application (e.g., "My Game", "Project Alpha")</span>
                        </div>
                        <button class="btn btn-primary" onclick="createApplication()">
                            <i class="fas fa-plus"></i>
                            <span>Create Application</span>
                        </button>
                        <div id="create-app-status" style="margin-top: 1rem;"></div>
                    </div>
                </div>
            </div>

            <!-- Settings Tab -->
            <div id="settings-tab" class="tab-content">
                <div class="page-header">
                    <div>
                        <h1>Account Settings</h1>
                        <p class="page-subtitle">Manage your account information and security</p>
                    </div>
                </div>

                <div class="card">
                    <div class="card-body">
                        <div class="settings-section">
                            <div class="settings-header">
                                <i class="fas fa-user"></i>
                                <h3>Change Username</h3>
                            </div>
                            <div class="form-row">
                                <div class="form-section" style="flex: 1;">
                                    <label class="form-label">New Username</label>
                                    <input type="text" id="new-username" placeholder="Enter new username" class="form-input">
                                </div>
                                <button class="btn btn-primary" onclick="updateUsername()" style="align-self: flex-end;">
                                    <i class="fas fa-save"></i>
                                    <span>Update</span>
                                </button>
                            </div>
                        </div>

                        <div class="divider"></div>

                        <div class="settings-section">
                            <div class="settings-header">
                                <i class="fas fa-envelope"></i>
                                <h3>Change Email</h3>
                            </div>
                            <div class="form-row">
                                <div class="form-section" style="flex: 1;">
                                    <label class="form-label">New Email</label>
                                    <input type="email" id="new-email" placeholder="Enter new email" class="form-input">
                                </div>
                                <button class="btn btn-primary" onclick="updateEmail()" style="align-self: flex-end;">
                                    <i class="fas fa-save"></i>
                                    <span>Update</span>
                                </button>
                            </div>
                        </div>

                        <div class="divider"></div>

                        <div class="settings-section">
                            <div class="settings-header">
                                <i class="fas fa-lock"></i>
                                <h3>Change Password</h3>
                            </div>
                            <div class="form-column">
                                <div class="form-section">
                                    <label class="form-label">Current Password</label>
                                    <input type="password" id="current-password" placeholder="Enter current password" class="form-input">
                                </div>
                                <div class="form-section">
                                    <label class="form-label">New Password</label>
                                    <input type="password" id="new-password" placeholder="Enter new password (min 6 characters)" class="form-input">
                                </div>
                                <button class="btn btn-primary" onclick="updatePassword()">
                                    <i class="fas fa-save"></i>
                                    <span>Update Password</span>
                                </button>
                            </div>
                        </div>

                        <div class="divider"></div>

                        <div class="settings-section danger-zone">
                            <div class="settings-header">
                                <i class="fas fa-exclamation-triangle"></i>
                                <h3>Delete Account</h3>
                            </div>
                            <p>This will permanently delete your account and all your license keys. This action cannot be undone.</p>
                            <div class="form-row">
                                <div class="form-section" style="flex: 1;">
                                    <label class="form-label">Confirm Password</label>
                                    <input type="password" id="delete-password" placeholder="Enter your password to confirm" class="form-input">
                                </div>
                                <button class="btn btn-danger" onclick="deleteAccount()" style="align-self: flex-end;">
                                    <i class="fas fa-trash"></i>
                                    <span>Delete Account</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal for Add Time -->
    <div id="addTimeModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Time to Key</h3>
                <button class="modal-close" onclick="closeAddTimeModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="modal-key-display">
                    <code id="modal-key"></code>
                </div>
                <div class="form-row">
                    <div class="form-section">
                        <label class="form-label">Duration</label>
                        <select id="modal-duration" class="form-input">
                            <option value="second">Seconds</option>
                            <option value="minute">Minutes</option>
                            <option value="hour">Hours</option>
                            <option value="day" selected>Days</option>
                            <option value="month">Months</option>
                        </select>
                    </div>
                    <div class="form-section">
                        <label class="form-label">Amount</label>
                        <input type="number" id="modal-amount" min="1" value="1" class="form-input">
                    </div>
                </div>
                <button class="btn btn-primary" onclick="addTime()">
                    <i class="fas fa-plus"></i>
                    <span>Add Time</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Admin Key Generation Modal -->
    <div id="adminKeyGenModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Generate Key for User</h3>
                <button class="btn-close" onclick="closeAdminKeyGenModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-section">
                    <label class="form-label">User Account</label>
                    <div style="background: #0d1117; padding: 1rem; border-radius: 6px; border: 1px solid #30363d; margin-bottom: 1rem;">
                        <div style="font-weight: bold; color: #58a6ff;" id="admin-key-user">Loading...</div>
                        <div style="color: #888888; font-size: 0.875rem;" id="admin-key-user-id">ID: Loading...</div>
                    </div>
                </div>
                
                <div class="form-section">
                    <label class="form-label">Key Format</label>
                    <input type="text" id="admin-key-format" placeholder="KEY-****" value="KEY-****" class="form-input">
                    <span class="form-hint">Use * for random characters</span>
                </div>
                
                <div class="form-row">
                    <div class="form-section" id="admin-key-amount-group">
                        <label class="form-label">Duration</label>
                        <select id="admin-key-duration" class="form-input">
                            <option value="second">Seconds</option>
                            <option value="minute">Minutes</option>
                            <option value="hour">Hours</option>
                            <option value="day" selected>Days</option>
                            <option value="month">Months</option>
                            <option value="lifetime">Lifetime</option>
                        </select>
                    </div>
                    
                    <div class="form-section" id="admin-key-amount-group">
                        <label class="form-label">Amount</label>
                        <input type="number" id="admin-key-amount" min="1" value="30" class="form-input">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeAdminKeyGenModal()">Cancel</button>
                <button class="btn btn-primary" onclick="generateAdminKey()">
                    <i class="fas fa-key"></i>
                    <span>Generate Key</span>
                </button>
            </div>
        </div>
    </div>

    <script src="dashboard.js"></script>
</body>
</html>

