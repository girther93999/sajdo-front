<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Astreon Auth</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav class="top-nav">
        <div class="nav-content">
            <div class="nav-brand">
                <h2>Astreon</h2>
            </div>
            <div class="nav-user-info">
                <span class="username" id="username-display"></span>
                <button class="btn-logout" onclick="logout()">Logout</button>
            </div>
        </div>
    </nav>

    <div class="main-container">
        <div class="sidebar">
            <div class="sidebar-section">
                <h3>Navigation</h3>
                <button class="nav-item active" onclick="showTab('overview')">
                    <span>üìä</span> Overview
                </button>
                <button class="nav-item" onclick="showTab('generate')">
                    <span>üîë</span> Generate Key
                </button>
                <button class="nav-item" onclick="showTab('keys')">
                    <span>üìã</span> My Keys
                </button>
                <button class="nav-item" onclick="showTab('credentials')">
                    <span>üîê</span> Credentials
                </button>
            </div>
        </div>

        <div class="content-area">
            <!-- Overview Tab -->
            <div id="overview-tab" class="tab-content active">
                <div class="page-header">
                    <h1>Overview</h1>
                    <p>Your account statistics and quick actions</p>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üìä</div>
                        <div class="stat-info">
                            <div class="stat-value" id="stat-total">0</div>
                            <div class="stat-label">Total Keys</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-info">
                            <div class="stat-value" id="stat-active">0</div>
                            <div class="stat-label">Active Keys</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üîí</div>
                        <div class="stat-info">
                            <div class="stat-value" id="stat-used">0</div>
                            <div class="stat-label">Used Keys</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚è∞</div>
                        <div class="stat-info">
                            <div class="stat-value" id="stat-expired">0</div>
                            <div class="stat-label">Expired</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Generate Tab -->
            <div id="generate-tab" class="tab-content">
                <div class="page-header">
                    <h1>Generate License Key</h1>
                    <p>Create new license keys with custom formats</p>
                </div>
                
                <div class="card">
                    <form onsubmit="event.preventDefault(); generateKey();">
                        <div class="form-group">
                            <label>Key Format</label>
                            <input type="text" id="format" placeholder="ASTREON-****-****" value="KEY-****">
                            <small>Use * for random characters. Example: KEY-**** becomes KEY-A7F9</small>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label>Duration</label>
                                <select id="duration">
                                    <option value="second">Seconds</option>
                                    <option value="minute">Minutes</option>
                                    <option value="hour">Hours</option>
                                    <option value="day" selected>Days</option>
                                    <option value="month">Months</option>
                                    <option value="lifetime">Lifetime</option>
                                </select>
                            </div>
                            
                            <div class="form-group" id="amount-group">
                                <label>Amount</label>
                                <input type="number" id="amount" min="1" value="30">
                            </div>
                        </div>
                        
                        <button type="submit" class="btn-primary btn-large">Generate Key</button>
                    </form>
                    
                    <div id="generated-result" class="result-box" style="display: none;">
                        <div class="result-header">‚úì Key Generated Successfully</div>
                        <div class="result-key">
                            <code id="generated-key"></code>
                            <button class="btn-icon" onclick="copyKey()" title="Copy">üìã</button>
                        </div>
                        <div class="result-info" id="key-info"></div>
                    </div>
                </div>
            </div>

            <!-- Keys Tab -->
            <div id="keys-tab" class="tab-content">
                <div class="page-header">
                    <h1>My License Keys</h1>
                    <button class="btn-secondary" onclick="loadKeys()">üîÑ Refresh</button>
                </div>
                
                <div class="card">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Key</th>
                                    <th>Status</th>
                                    <th>Expires</th>
                                    <th>HWID Lock</th>
                                    <th>IP Address</th>
                                    <th>Created</th>
                                    <th>Last Used</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="keys-table">
                                <tr><td colspan="8" class="loading">Loading keys...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Credentials Tab -->
            <div id="credentials-tab" class="tab-content">
                <div class="page-header">
                    <h1>Account Credentials</h1>
                    <p>Use these in your C++ application</p>
                </div>
                
                <div class="card">
                    <div class="credential-section">
                        <div class="credential-item">
                            <div class="credential-label">Account ID</div>
                            <div class="credential-value">
                                <code id="account-id"></code>
                                <button class="btn-icon" onclick="copyCredential('account-id')">üìã</button>
                            </div>
                        </div>
                        <div class="credential-item">
                            <div class="credential-label">API Token</div>
                            <div class="credential-value">
                                <code id="api-token"></code>
                                <button class="btn-icon" onclick="copyCredential('api-token')">üìã</button>
                            </div>
                        </div>
                        <div class="credential-item">
                            <div class="credential-label">Username</div>
                            <div class="credential-value">
                                <code id="account-username"></code>
                            </div>
                        </div>
                    </div>
                    
                    <div class="code-example">
                        <h3>Integration Code</h3>
                        <pre><code>// Your Account Credentials
std::string ACCOUNT_ID = "<span id="code-account-id">YOUR_ACCOUNT_ID</span>";
std::string API_TOKEN = "<span id="code-api-token">YOUR_API_TOKEN</span>";

// Setup
AuthClient auth("https://answub-back.onrender.com");
auth.setCredentials(ACCOUNT_ID, API_TOKEN);

// Validate
if (auth.validateKey(userKey)) {
    // Success!
}</code></pre>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Add Time -->
    <div id="addTimeModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Time to Key</h3>
                <button class="modal-close" onclick="closeAddTimeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-key-display">
                    <code id="modal-key"></code>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Duration</label>
                        <select id="modal-duration">
                            <option value="second">Seconds</option>
                            <option value="minute">Minutes</option>
                            <option value="hour">Hours</option>
                            <option value="day" selected>Days</option>
                            <option value="month">Months</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Amount</label>
                        <input type="number" id="modal-amount" min="1" value="1">
                    </div>
                </div>
                <button class="btn-primary" onclick="addTime()">Add Time</button>
            </div>
        </div>
    </div>

    <script src="dashboard.js"></script>
</body>
</html>
