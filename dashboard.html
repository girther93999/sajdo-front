<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Astreon Auth</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav class="top-nav">
        <div class="nav-content">
            <div class="nav-brand">
                <h2>Astreon</h2>
            </div>
            <div class="nav-user-info">
                <span class="username" id="username-display"></span>
                <button class="btn-logout" onclick="logout()">Logout</button>
            </div>
        </div>
    </nav>

    <div class="main-container">
        <div class="sidebar">
            <div class="sidebar-section">
                <h3>Navigation</h3>
                <button class="nav-item active" onclick="showTab('overview')">
                    <i class="fas fa-chart-line"></i> Overview
                </button>
                <button class="nav-item" onclick="showTab('generate')">
                    <i class="fas fa-key"></i> Generate Key
                </button>
                <button class="nav-item" onclick="showTab('keys')">
                    <i class="fas fa-list"></i> My Keys
                </button>
                <button class="nav-item" onclick="showTab('credentials')">
                    <i class="fas fa-user-shield"></i> Credentials
                </button>
                <button class="nav-item" onclick="showTab('examples')">
                    <i class="fas fa-code"></i> Examples
                </button>
            </div>
        </div>

        <div class="content-area">
            <!-- Overview Tab -->
            <div id="overview-tab" class="tab-content active">
                <div class="page-header">
                    <div>
                        <h1><i class="fas fa-chart-line"></i> Overview</h1>
                        <p>Your account statistics and quick actions</p>
                    </div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-key"></i></div>
                        <div class="stat-info">
                            <div class="stat-value" id="stat-total">0</div>
                            <div class="stat-label">Total Keys</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-check-circle"></i></div>
                        <div class="stat-info">
                            <div class="stat-value" id="stat-active">0</div>
                            <div class="stat-label">Active Keys</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-lock"></i></div>
                        <div class="stat-info">
                            <div class="stat-value" id="stat-used">0</div>
                            <div class="stat-label">Used Keys</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-clock"></i></div>
                        <div class="stat-info">
                            <div class="stat-value" id="stat-expired">0</div>
                            <div class="stat-label">Expired</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Generate Tab -->
            <div id="generate-tab" class="tab-content">
                <div class="page-header">
                    <div>
                        <h1><i class="fas fa-magic"></i> Generate License Key</h1>
                        <p>Create new license keys with custom formats</p>
                    </div>
                </div>
                
                <div class="card">
                    <form onsubmit="event.preventDefault(); generateKey();">
                        <div class="form-group">
                            <label>Key Format</label>
                            <input type="text" id="format" placeholder="ASTREON-****-****" value="KEY-****">
                            <small>Use * for random characters. Example: KEY-**** becomes KEY-A7F9</small>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label>Duration</label>
                                <select id="duration">
                                    <option value="second">Seconds</option>
                                    <option value="minute">Minutes</option>
                                    <option value="hour">Hours</option>
                                    <option value="day" selected>Days</option>
                                    <option value="month">Months</option>
                                    <option value="lifetime">Lifetime</option>
                                </select>
                            </div>
                            
                            <div class="form-group" id="amount-group">
                                <label>Amount</label>
                                <input type="number" id="amount" min="1" value="30">
                            </div>
                        </div>
                        
                        <button type="submit" class="btn-primary btn-large"><i class="fas fa-magic"></i> Generate Key</button>
                    </form>
                    
                    <div id="generated-result" class="result-box" style="display: none;">
                        <div class="result-header">✓ Key Generated Successfully</div>
                        <div class="result-key">
                            <code id="generated-key"></code>
                            <button class="btn-icon" onclick="copyKey()" title="Copy"><i class="fas fa-copy"></i></button>
                        </div>
                        <div class="result-info" id="key-info"></div>
                    </div>
                </div>
            </div>

            <!-- Keys Tab -->
            <div id="keys-tab" class="tab-content">
                <div class="page-header">
                    <div>
                        <h1><i class="fas fa-list"></i> My License Keys</h1>
                        <p>Manage and track all your generated keys</p>
                    </div>
                    <button class="btn-secondary" onclick="loadKeys()"><i class="fas fa-sync-alt"></i> Refresh</button>
                </div>
                
                <div class="card">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Key</th>
                                    <th>Status</th>
                                    <th>Expires</th>
                                    <th>HWID Lock</th>
                                    <th>IP Address</th>
                                    <th>Created</th>
                                    <th>Last Used</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="keys-table">
                                <tr><td colspan="8" class="loading">Loading keys...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Examples Tab -->
            <div id="examples-tab" class="tab-content">
                <div class="page-header">
                    <div>
                        <h1><i class="fas fa-code"></i> Integration Examples</h1>
                        <p>Copy-paste ready code for your C++ project</p>
                    </div>
                </div>
                
                <div class="card">
                    <h3 style="margin-bottom: 16px; color: #c9d1d9;"><i class="fas fa-file-code"></i> Complete main.cpp</h3>
                    <p style="color: #8b949e; margin-bottom: 16px;">Copy this entire code into your main.cpp file:</p>
                    <div class="code-block-wrapper">
                        <div class="code-header">
                            <span>main.cpp</span>
                            <button class="btn-copy-code" onclick="copyCode('main-cpp')"><i class="fas fa-copy"></i> Copy</button>
                        </div>
                        <pre id="main-cpp" class="code-block"><code>// Astreon Auth - Complete Example
#include &lt;iostream&gt;
#include &lt;string&gt;
#include "auth_client.h"

int main() {
    // ============================================
    // YOUR CREDENTIALS (from Credentials tab)
    // ============================================
    std::string ACCOUNT_ID = "<span id="example-account-id">YOUR_ACCOUNT_ID</span>";
    std::string API_TOKEN = "<span id="example-api-token">YOUR_API_TOKEN</span>";
    
    // ============================================
    // SETUP AUTH CLIENT
    // ============================================
    AuthClient auth("https://answub-back.onrender.com");
    auth.setCredentials(ACCOUNT_ID, API_TOKEN);
    
    // ============================================
    // GET LICENSE KEY FROM USER
    // ============================================
    std::string key;
    std::cout << "Enter license key: ";
    std::getline(std::cin, key);
    
    // ============================================
    // VALIDATE KEY
    // ============================================
    if (auth.validateKey(key)) {
        std::cout << "\n✓ SUCCESS - Key is valid!\n";
        std::cout << "HWID: " << auth.getHWID() << "\n";
        
        // YOUR APPLICATION CODE HERE
        std::cout << "Welcome! Starting application...\n";
        
    } else {
        std::cout << "\n✗ FAILED: " << auth.getLastError() << "\n";
        return 1;
    }
    
    return 0;
}</code></pre>
                    </div>
                </div>
                
                <div class="card">
                    <h3 style="margin-bottom: 16px; color: #c9d1d9;"><i class="fas fa-file"></i> Required Files</h3>
                    <p style="color: #8b949e; margin-bottom: 20px;">Download these 2 files and add them to your project:</p>
                    
                    <div class="file-list">
                        <div class="file-item">
                            <div class="file-info">
                                <i class="fas fa-file-code"></i>
                                <div>
                                    <strong>auth_client.h</strong>
                                    <span>Header file - Include this in your project</span>
                                </div>
                            </div>
                            <div class="file-actions">
                                <button class="btn-view" onclick="showFile('auth_client.h')"><i class="fas fa-eye"></i> View</button>
                                <button class="btn-download" onclick="downloadFile('auth_client.h')"><i class="fas fa-download"></i> Download</button>
                            </div>
                        </div>
                        
                        <div class="file-item">
                            <div class="file-info">
                                <i class="fas fa-file-code"></i>
                                <div>
                                    <strong>auth_client.cpp</strong>
                                    <span>Implementation file - Add to your project</span>
                                </div>
                            </div>
                            <div class="file-actions">
                                <button class="btn-view" onclick="showFile('auth_client.cpp')"><i class="fas fa-eye"></i> View</button>
                                <button class="btn-download" onclick="downloadFile('auth_client.cpp')"><i class="fas fa-download"></i> Download</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3 style="margin-bottom: 16px; color: #c9d1d9;"><i class="fas fa-info-circle"></i> Quick Start Guide</h3>
                    <ol class="guide-list">
                        <li>Download <code>auth_client.h</code> and <code>auth_client.cpp</code> above</li>
                        <li>Add both files to your Visual Studio project (or your IDE)</li>
                        <li>Copy the <code>main.cpp</code> code above</li>
                        <li>Replace <code>YOUR_ACCOUNT_ID</code> and <code>YOUR_API_TOKEN</code> with your credentials</li>
                        <li>Build and run!</li>
                    </ol>
                </div>
            </div>

            <!-- Credentials Tab -->
            <div id="credentials-tab" class="tab-content">
                <div class="page-header">
                    <div>
                        <h1><i class="fas fa-user-shield"></i> Account Credentials</h1>
                        <p>Use these in your C++ application</p>
                    </div>
                </div>
                
                <div class="card">
                    <div class="credential-section">
                        <div class="credential-item">
                            <div class="credential-label">Account ID</div>
                            <div class="credential-value">
                                <code id="account-id"></code>
                                <button class="btn-icon" onclick="copyCredential('account-id')"><i class="fas fa-copy"></i></button>
                            </div>
                        </div>
                        <div class="credential-item">
                            <div class="credential-label">API Token</div>
                            <div class="credential-value">
                                <code id="api-token"></code>
                                <button class="btn-icon" onclick="copyCredential('api-token')"><i class="fas fa-copy"></i></button>
                            </div>
                        </div>
                        <div class="credential-item">
                            <div class="credential-label">Username</div>
                            <div class="credential-value">
                                <code id="account-username"></code>
                            </div>
                        </div>
                    </div>
                    
                    <div class="code-example">
                        <h3><i class="fas fa-code"></i> Integration Code</h3>
                        <pre><code>// Your Account Credentials
std::string ACCOUNT_ID = "<span id="code-account-id">YOUR_ACCOUNT_ID</span>";
std::string API_TOKEN = "<span id="code-api-token">YOUR_API_TOKEN</span>";

// Setup
AuthClient auth("https://answub-back.onrender.com");
auth.setCredentials(ACCOUNT_ID, API_TOKEN);

// Validate
if (auth.validateKey(userKey)) {
    // Success!
}</code></pre>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Add Time -->
    <div id="addTimeModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Time to Key</h3>
                <button class="modal-close" onclick="closeAddTimeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-key-display">
                    <code id="modal-key"></code>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Duration</label>
                        <select id="modal-duration">
                            <option value="second">Seconds</option>
                            <option value="minute">Minutes</option>
                            <option value="hour">Hours</option>
                            <option value="day" selected>Days</option>
                            <option value="month">Months</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Amount</label>
                        <input type="number" id="modal-amount" min="1" value="1">
                    </div>
                </div>
                <button class="btn-primary" onclick="addTime()"><i class="fas fa-clock"></i> Add Time</button>
            </div>
        </div>
    </div>

    <script src="dashboard.js"></script>
</body>
</html>
